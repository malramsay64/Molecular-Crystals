include system

#my_dir := $(dir $(word $(words $(MAKEFILE_LIST)), $(MAKEFILE_LIST)))
BIN_PATH := $(my_dir)/bin/$(SYS_NAME)
LIB:=$(my_dir)/analysis/lib

LOG=out.log
# C settings
CC = gcc
CXX = g++
CFLAGS = -O2 -std=c99
CXXFLAGS := -Ofast -std=gnu++11
LDFLAGS = -lm

# Lammps settings

LAMMPS_IN=$(my_dir)/lammps_in/in.molecular
EQUIL_IN=$(my_dir)/lammps_in/in.equil
CREATE_IN=$(my_dir)/lammps_in/in.create
CRYS_IN=$(my_dir)/lammps_in/in.crys

LAMMPS_VARS+=-v fname $(LAMMPS_IN)

ifeq ($(SYS_NAME), mac)
	LAMMPS_PATH=
	LAMMPS=lmp_mac_mpi
	#LAMMPS_FLAGS=-sf gpu -pk gpu 1
else 
    ifeq ($(SYS_NAME), unix)
	    LAMMPS_PATH=/home/malcolm/bin/
	    LAMMPS=lmp_ubuntu
    else
	    LAMMPS_PATH=
	    LAMMPS=lmp_mpi
    endif
endif

LAMMPS_FILES=-v restart $$(restart) -v my_path ./ -v the_path $$(PREFIX) -v molecule $$(molecule) -v mol_settings $$(mol_settings) -v last_restart $$(last_restart)

LAMMPS_THERM_VARS= -v T $$(temp) -v press $$(pressure)

LAMMPS_SYS_VARS=-v steps $$(steps) -v printevery $$(print) -v n_mol $$(n_mol)

LAMMPS_MOL_VARS=-v shape $$(shape) -v atoms $$(atoms) -v radius $$(radius)

LAMMPS_VARS=$(LAMMPS_SYS_VARS) $(LAMMPS_FILES) $(LAMMPS_THERM_VARS) $(LAMMPS_MOL_VARS)

EQUIL_VARS=$(LAMMPS_FILES) $(LAMMPS_THERM_VARS) $(LAMMPS_MOL_VARS) -v steps $(equil_steps) 

CREATE_VARS=$(LAMMPS_FILES) $(LAMMPS_MOL_VARS) -v T $$(prev_t) -v press $$(pressure) -v steps $(equil_steps)  

# MPI Settings

ifeq ($(SYS_NAME), mac)
	MPI=mpirun -np 8
else 
    ifeq ($(SYS_NAME), silica )
	    MPI_PATH=
	    MPI=mpirun -np 8
    else
	    MPI=mpirun -np 8
    endif
endif


# Python settings

PYTHON_FILES=molecule.py files.py
PYTHON_LIB:=$(my_dir)/pylib
FILES=files.py
CRYS_FILE=createCells.py
PYTHON=python

# Variable Settings

VAR_MOLECULE=mol.settings
VAR_SYSTEM=system.settings

# Shell settings

MKDIR=mkdir
TOUCH=touch
RM=rm
